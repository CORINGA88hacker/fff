<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Anime Aniverso</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    header {
      text-align: center;
      padding: 20px;
      background: #e50914;
      font-size: 24px;
      font-weight: bold;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 15px;
      padding: 20px;
    }
    .card {
      background: #222;
      border-radius: 10px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .card:hover {
      transform: scale(1.05);
    }
    .card img {
      width: 100%;
      height: 270px;
      object-fit: cover;
    }
    .card-info {
      padding: 10px;
    }
    .card-info h3 {
      font-size: 14px;
      margin: 0 0 5px;
    }
    .card-info small {
      color: #aaa;
      font-size: 12px;
    }

    /* Modal */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .modal-content {
      background: #222;
      border-radius: 10px;
      max-width: 800px;
      width: 100%;
      overflow-y: auto;
      max-height: 90vh;
      position: relative;
    }
    .modal-banner {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 10px 10px 0 0;
    }
    .modal-body {
      padding: 20px;
    }
    .modal-body h2 {
      margin: 0 0 10px;
    }
    .modal-body p {
      font-size: 14px;
      color: #ddd;
    }
    .close {
      position: absolute;
      top: 10px; right: 15px;
      font-size: 24px;
      cursor: pointer;
    }
    .copy-btn {
      margin-top: 15px;
      background: #e50914;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      color: #fff;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>Anime Aniverso</header>
  <div class="grid" id="animeGrid"></div>

  <!-- Modal -->
  <div class="modal" id="animeModal">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <img id="modalBanner" class="modal-banner" src="" alt="Banner">
      <div class="modal-body">
        <h2 id="modalNome"></h2>
        <h4 id="modalTituloOriginal"></h4>
        <p id="modalDescricao"></p>
        <p><b>Gênero:</b> <span id="modalGenero"></span></p>
        <p><b>Status:</b> <span id="modalStatus"></span></p>
        <p><b>Ano:</b> <span id="modalAno"></span> | <b>Classificação:</b> <span id="modalClassificacao"></span></p>
        <p><b>Duração:</b> <span id="modalDuracao"></span> min</p>
        <p><b>País:</b> <span id="modalPais"></span></p>
        <button class="copy-btn" id="copyLink">Copiar Link</button>
      </div>
    </div>
  </div>

  <script>
    const API_URL = "https://anime-aniverso.vercel.app/Api/animes/";
    const grid = document.getElementById("animeGrid");
    const modal = document.getElementById("animeModal");

    const modalBanner = document.getElementById("modalBanner");
    const modalNome = document.getElementById("modalNome");
    const modalTituloOriginal = document.getElementById("modalTituloOriginal");
    const modalDescricao = document.getElementById("modalDescricao");
    const modalGenero = document.getElementById("modalGenero");
    const modalStatus = document.getElementById("modalStatus");
    const modalAno = document.getElementById("modalAno");
    const modalClassificacao = document.getElementById("modalClassificacao");
    const modalDuracao = document.getElementById("modalDuracao");
    const modalPais = document.getElementById("modalPais");
    const copyLink = document.getElementById("copyLink");

    let currentId = "";

    async function loadAnimes() {
      const res = await fetch(API_URL);
      const data = await res.json();

      data.forEach(anime => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <img src="${anime.capa}" alt="${anime.nome}">
          <div class="card-info">
            <h3>${anime.nome}</h3>
            <small>${anime.ano} • ${anime.classificacao} • ${anime.qualidade}</small>
          </div>
        `;
        card.onclick = () => openModal(anime);
        grid.appendChild(card);
      });
    }

    function openModal(anime) {
      modal.style.display = "flex";
      modalBanner.src = anime.banner || anime.capa;
      modalNome.textContent = anime.nome;
      modalTituloOriginal.textContent = anime.titulo_original;
      modalDescricao.textContent = anime.descricao;
      modalGenero.textContent = anime.genero;
      modalStatus.textContent = anime.status;
      modalAno.textContent = anime.ano;
      modalClassificacao.textContent = anime.classificacao;
      modalDuracao.textContent = anime.duracao_episodio;
      modalPais.textContent = anime.pais;
      currentId = anime.id;
    }

    document.getElementById("closeModal").onclick = () => modal.style.display = "none";

    copyLink.onclick = () => {
      navigator.clipboard.writeText(`${API_URL}${currentId}`).then(() => {
        alert("Link copiado!");
      });
    };

    window.onclick = (e) => { if (e.target === modal) modal.style.display = "none"; };

    loadAnimes();
  </script>
</body>
</html>
